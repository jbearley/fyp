{% extends 'base.html' %}

{% block content %}

<main>
    <section id='your-information' class='your-information'>
        <div class='not-resizer'>
            <header>
                <h1>Your Information</h1>
                <p>Use the fields below to set your graduation year, majors, and minors.</p>
            </header>
            <content>
                {% if drake_curriculum and user_choices and ('majors' in drake_curriculum) and ('majors' in
                user_choices) %}
                {% for i in range((user_choices['majors'] | length)) %}
                {% set major_choice = user_choices['majors'][i] %}
                <div class="dropdown-container">
                    <label for='major'>Major {{i + 1}}</label>
                    <select id='major'>
                        <option selected disabled hidden value=''>Please choose an option</option>
                        {% for major in drake_curriculum['majors'] %}
                        <option value='{{major}}' {{ (major==major_choice) and 'selected' or '' }}>{{major}}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endfor %}
                <div class="dropdown-container">
                    <label for='major'>Major {{(user_choices['majors'] | length) + 1}}</label>
                    <select id='major'>
                        <option selected disabled hidden value=''>Please choose an option</option>
                        {% for major in drake_curriculum['majors'] %}
                        <option value='{{major}}'>{{major}}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endif %}
            </content>
        </div>
        <div class='resizer'></div>
    </section>
    <section id='requirements-overview'>
        <div class='not-resizer'>
            <header>
                <h1>Requirements Checklist</h1>
                <p>These items must be fulfilled for successful completion of your program.</p>
            </header>
            <content>
                {% if requirements %}
                <div class='reqs-container'>
                    <h3>Minimum Total Credit</h3>
                    <div class='credit-req req-header'><input type='checkbox'><label>{{requirements.total_credits}}</label></div>
                </div>
                {% set temp = requirements.majors %}
                {% if temp.update({'AOIs': requirements.AOIs}) %}{% endif %}
                {% for category_key, category in temp.items() %}
                <div class='reqs-container'>
                    <h3>{{category_key}}</h3>
                    <div class='reqs'>
                        {% for req_key, req in category.items() %}
                        {% if req_key != 'singles' %}
                        <div class='choice-group see-more-container'>
                            {% set num_choices = req_key[5]|int %}
                            <div class='req-header'><input type='checkbox'><label>{{req_key[7:]}} (-/{{num_choices}})</label></div>
                            {% for class in req %}
                            <label for='{{req_key}}_{{class}}'><input type='radio' value='{{class}}' name='{{req_key}}_{{class}}' id='{{req_key}}_{{class}}'>{{class}}</label>
                            {% endfor %}
                            <div class='see-more'></div>
                        </div>
                        {% else %}
                        {% for class in req %}
                        <div class='req-header'><input type='checkbox'><label>{{class}}</label></div>
                        {% endfor %}
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
                {% endif %}
            </content>
        </div>
        <div class='resizer'></div>
    </section>
    <section id='by-semester'>
        <div class='not-resizer'>
            <header>
                <div class='left'>
                    <h1>Four-Year Plan</h1>
                    <p>Here is a sample four-year plan that meets your requirements.</p>
                </div>
                <div class='see-more-controllers'>
                    <button id='expand-all'>Expand All</button>
                    <button id='collapse-all'>Collapse All</button>
                </div>
            </header>
            <content>
                <div class='fyp-grid'>
                    {% if classes_by_semester %}
                    {% for semester_key, semester in classes_by_semester.items() %}
                    <div class='semester-container'>
                        <div class='semester-header'>
                            <h3>{{semester_key}}</h3>
                            <div class='total-credits'>
                                credits: <span>{{semester.values()|sum(attribute='num_credits')}}</span>
                            </div>
                        </div>
                        <div class='classes-list-container'>
                            {% for class_key, class in semester.items() %}
                            <div class='class-container see-more-container'>
                                <div class='main-info'>
                                    <span class='num-credits'>{{class.num_credits}}</span><span
                                        class='course-number'>{{class.course_number}}</span><span
                                        class='course-title'>{{class.title}}</span>
                                </div>
                                <div class='attributes'>
                                    {% for attribute in class.attributes %}
                                    <div class='chip'>{{attribute}}</div>
                                    {% endfor %}
                                </div>
                                <div class='see-more'></div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                    {% endif %}
                </div>
            </content>
        </div>
    </section>
</main>

{% endblock %}